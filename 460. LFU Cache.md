## 460. LFU Cache.md

### Solution 1
- my own version -- not working yet. can not pass large test case


### Solution 2
```java
class LFUCache {
    class Node{
        int key;
        int value;
        int freq;
        LinkedList<Integer> list;
        Node(int key, int value, int freq, LinkedList<Integer> list){
            this.key = key;
            this.value=value;
            this.freq = freq;
            this.list = list;
        }
    }
    int capacity;
    int min_freq;
    Map<Integer, Node> map;
    Map<Integer, LinkedList<Integer>> freqL;
    public LFUCache(int capacity) {
        this.capacity = capacity;
        this.min_freq = 0;
        map = new HashMap<>();
        freqL = new HashMap<>();
    }
    
    public int get(int key) {
        Node p = map.get(key);
        if(p!=null){
            //remove p from  freqL
            touch(p);
            return p.value;
            //change p freq add it back to map and freqL
        }
        return -1;
    }
    //increase frequency, update p, add it back to map
    void touch(Node p){
        int prev_freq = p.freq;
        int freq = ++(p.freq);
        freqL.get(prev_freq).remove(new Integer(p.key));
        if(freqL.get(prev_freq).size()==0 && prev_freq==min_freq){
            ++min_freq;
        }
        if(freqL.containsKey(freq)){
            LinkedList list = freqL.get(freq);
            list.addFirst(p.key);
        }else{
            LinkedList list = new LinkedList<>();
            list.addFirst(p.key);
            freqL.put(freq, list);
        }
        p.list = freqL.get(freq);
    }
    
    public void put(int key, int value) {
        System.out.println("in put:"+key+" "+value);
        if(capacity==0) return ;
        Node it = map.get(key);
        if(it!=null){
            it.value = value;
            touch(it);
            return;
        }
        if(map.size()==capacity){
            int key_to_evict = freqL.get(min_freq).removeLast();
            map.remove(key_to_evict);
        }
        int freq = 1;
        min_freq = freq;
        System.out.println(key+" "+value);
        if(freqL.get(freq)==null)
            freqL.put(freq, new LinkedList<>());
        
        freqL.get(freq).addFirst(key);    
        
        map.put(key, new Node(key, value, freq, freqL.get(freq)));
    }
}

/**
 * Your LFUCache object will be instantiated and called as such:
 * LFUCache obj = new LFUCache(capacity);
 * int param_1 = obj.get(key);
 * obj.put(key,value);
 */
```
